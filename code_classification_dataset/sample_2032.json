{
    "prob_desc_time_limit": "2 seconds",
    "prob_desc_sample_outputs": "[\"AE somewhere\", \"AE in line 3\", \"Unhandled Exception\"]",
    "src_uid": "320e6c06194f8b1ccf1f4218d0757d2f",
    "prob_desc_notes": "NoteIn the first sample there are 2 try-catch-blocks such that try operator is described earlier than throw operator and catch operator is described later than throw operator: try-catch(BE,\"BE in line 3\") and try-catch(AE,\"AE somewhere\"). Exception type is AE, so the second block will be activated, because operator catch(AE,\"AE somewhere\") has exception type AE as parameter and operator catch(BE,\"BE in line 3\") has exception type BE.In the second sample there are 2 try-catch-blocks such that try operator is described earlier than throw operator and catch operator is described later than throw operator: try-catch(AE,\"AE in line 3\") and try-catch(AE,\"AE somewhere\"). Exception type is AE, so both blocks can be activated, but only the first one will be activated, because operator catch(AE,\"AE in line 3\") is described earlier than catch(AE,\"AE somewhere\")In the third sample there is no blocks that can be activated by an exception of type CE.",
    "prob_desc_description": "Vasya is developing his own programming language VPL (Vasya Programming Language). Right now he is busy making the system of exceptions. He thinks that the system of exceptions must function like that.The exceptions are processed by try-catch-blocks. There are two operators that work with the blocks: The try operator. It opens a new try-catch-block.  The catch(&lt;exception_type&gt;, &lt;message&gt;) operator. It closes the try-catch-block that was started last and haven't yet been closed. This block can be activated only via exception of type &lt;exception_type&gt;. When we activate this block, the screen displays the &lt;message&gt;. If at the given moment there is no open try-catch-block, then we can't use the catch operator.The exceptions can occur in the program in only one case: when we use the throw operator. The throw(&lt;exception_type&gt;) operator creates the exception of the given type.Let's suggest that as a result of using some throw operator the program created an exception of type a. In this case a try-catch-block is activated, such that this block's try operator was described in the program earlier than the used throw operator. Also, this block's catch operator was given an exception type a as a parameter and this block's catch operator is described later that the used throw operator. If there are several such try-catch-blocks, then the system activates the block whose catch operator occurs earlier than others. If no try-catch-block was activated, then the screen displays message \"Unhandled Exception\".To test the system, Vasya wrote a program that contains only try, catch and throw operators, one line contains no more than one operator, the whole program contains exactly one throw operator.Your task is: given a program in VPL, determine, what message will be displayed on the screen.",
    "prob_desc_output_spec": "Print the message the screen will show after the given program is executed.",
    "prob_desc_input_spec": "The first line contains a single integer: n (1 ≤ n ≤ 105) the number of lines in the program. Next n lines contain the program in language VPL. Each line contains no more than one operator. It means that input file can contain empty lines and lines, consisting only of spaces. The program contains only operators try, catch and throw. It is guaranteed that the program is correct. It means that each started try-catch-block was closed, the catch operators aren't used unless there is an open try-catch-block. The program has exactly one throw operator. The program may have spaces at the beginning of a line, at the end of a line, before and after a bracket, a comma or a quote mark. The exception type is a nonempty string, that consists only of upper and lower case english letters. The length of the string does not exceed 20 symbols. Message is a nonempty string, that consists only of upper and lower case english letters, digits and spaces. Message is surrounded with quote marks. Quote marks shouldn't be printed. The length of the string does not exceed 20 symbols. Length of any line in the input file does not exceed 50 symbols. ",
    "prob_desc_output_to": "standard output",
    "prob_desc_input_from": "standard input",
    "lang": "PyPy 2",
    "lang_cluster": "Python",
    "difficulty": 1800,
    "file_name": "train_016.jsonl",
    "code_uid": "f39aae40cdd6894d8218ab3fd0e67684",
    "prob_desc_memory_limit": "256 megabytes",
    "prob_desc_sample_inputs": "[\"8\\ntry\\n    try\\n        throw ( AE ) \\n    catch ( BE, \\\"BE in line 3\\\")\\n\\n    try\\n    catch(AE, \\\"AE in line 5\\\") \\ncatch(AE,\\\"AE somewhere\\\")\", \"8\\ntry\\n    try\\n        throw ( AE ) \\n    catch ( AE, \\\"AE in line 3\\\")\\n\\n    try\\n    catch(BE, \\\"BE in line 5\\\") \\ncatch(AE,\\\"AE somewhere\\\")\", \"8\\ntry\\n    try\\n        throw ( CE ) \\n    catch ( BE, \\\"BE in line 3\\\")\\n\\n    try\\n    catch(AE, \\\"AE in line 5\\\") \\ncatch(AE,\\\"AE somewhere\\\")\"]",
    "exec_outcome": "PASSED",
    "source_code": "from sys import stdin\nimport re\n\n\ndef get(s):\n    throw, error = '', ''\n    be, en = s.find('(') + 1, s.find(')') - 1\n\n    while s[be] != ',':\n        throw += s[be]\n        be += 1\n\n    while s[en] != ',':\n        if s[en] != '\\\"':\n            error += s[en]\n        en -= 1\n\n    return throw.strip(), error[::-1].strip()\n\n\ndef get_throw(s):\n    be, throw = s.find('(') + 1, ''\n\n    while s[be] != ')':\n        throw += s[be]\n        be += 1\n\n    return throw.strip()\n\n\nrstr = lambda: stdin.readline().strip()\nn = int(input())\na, ans, flag = [rstr() for _ in range(n)], 'Unhandled Exception', 0\nstack, c = [], 0\n\nfor i in a:\n    if not stack and flag:\n        break\n\n    if i == 'try':\n        if flag:\n            c += 1\n        else:\n            stack.append(i)\n\n    elif 'throw' in i:\n        flag = get_throw(i)\n\n    elif 'catch' in i:\n        if not flag:\n            stack.pop()\n        elif c:\n            c -= 1\n        else:\n            stack.pop()\n            throw, error = get(i)\n            # print(throw, error)\n            if throw == flag:\n                ans = error\n                break\n\nprint(ans)\n",
    "prob_desc_created_at": "1339342200",
    "tags": [
        "implementation",
        "expression parsing"
    ],
    "hidden_unit_tests": ""
}