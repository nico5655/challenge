{
    "prob_desc_time_limit": "3 seconds",
    "prob_desc_sample_outputs": "[\"2\\n5 10\", \"1\\n10\", \"3\\n2 3 4\", \"3\\n42 13 37\"]",
    "src_uid": "0fd45a1eb1fc23e579048ed2beac7edd",
    "prob_desc_notes": "NoteLet's consider the examples from the statement. In the first example, Monocarp pins the messages $$$5$$$ and $$$10$$$.  if the first student reads the message $$$5$$$, the second student reads the messages $$$5$$$ and $$$10$$$, and the third student reads the messages $$$5$$$ and $$$10$$$, the number of students which have read their respective messages will be $$$2$$$;  if the first student reads the message $$$10$$$, the second student reads the messages $$$5$$$ and $$$10$$$, and the third student reads the messages $$$5$$$ and $$$10$$$, the number of students which have read their respective messages will be $$$3$$$. So, the expected number of students which will read their respective messages is $$$\\frac{5}{2}$$$. In the second example, Monocarp pins the message $$$10$$$.  if the first student reads the message $$$10$$$, the second student reads the message $$$10$$$, and the third student reads the message $$$10$$$, the number of students which have read their respective messages will be $$$2$$$. So, the expected number of students which will read their respective messages is $$$2$$$. If Monocarp had pinned both messages $$$5$$$ and $$$10$$$, the expected number of students which read their respective messages would have been $$$2$$$ as well. In the third example, the expected number of students which will read their respective messages is $$$\\frac{8}{3}$$$. In the fourth example, the expected number of students which will read their respective messages is $$$2$$$.",
    "prob_desc_description": "Monocarp is a tutor of a group of $$$n$$$ students. He communicates with them using a conference in a popular messenger.Today was a busy day for Monocarp — he was asked to forward a lot of posts and announcements to his group, that's why he had to write a very large number of messages in the conference. Monocarp knows the students in the group he is tutoring quite well, so he understands which message should each student read: Monocarp wants the student $$$i$$$ to read the message $$$m_i$$$.Of course, no one's going to read all the messages in the conference. That's why Monocarp decided to pin some of them. Monocarp can pin any number of messages, and if he wants anyone to read some message, he should pin it — otherwise it will definitely be skipped by everyone.Unfortunately, even if a message is pinned, some students may skip it anyway. For each student $$$i$$$, Monocarp knows that they will read at most $$$k_i$$$ messages. Suppose Monocarp pins $$$t$$$ messages; if $$$t \\le k_i$$$, then the $$$i$$$-th student will read all the pinned messages; but if $$$t &gt; k_i$$$, the $$$i$$$-th student will choose exactly $$$k_i$$$ random pinned messages (all possible subsets of pinned messages of size $$$k_i$$$ are equiprobable) and read only the chosen messages.Monocarp wants to maximize the expected number of students that read their respective messages (i.e. the number of such indices $$$i$$$ that student $$$i$$$ reads the message $$$m_i$$$). Help him to choose how many (and which) messages should he pin!",
    "prob_desc_output_spec": "In the first line, print one integer $$$t$$$ ($$$1 \\le t \\le 2 \\cdot 10^5$$$) — the number of messages Monocarp should pin. In the second line, print $$$t$$$ distinct integers $$$c_1$$$, $$$c_2$$$, ..., $$$c_t$$$ ($$$1 \\le c_i \\le 2 \\cdot 10^5$$$) — the indices of the messages Monocarp should pin. The messages can be listed in any order. If there are multiple answers, print any of them.",
    "prob_desc_input_spec": "The first line contains one integer $$$n$$$ ($$$1 \\le n \\le 2 \\cdot 10^5$$$) — the number of students in the conference. Then $$$n$$$ lines follow. The $$$i$$$-th line contains two integers $$$m_i$$$ and $$$k_i$$$ ($$$1 \\le m_i \\le 2 \\cdot 10^5$$$; $$$1 \\le k_i \\le 20$$$) — the index of the message which Monocarp wants the $$$i$$$-th student to read and the maximum number of messages the $$$i$$$-th student will read, respectively.",
    "prob_desc_output_to": "standard output",
    "prob_desc_input_from": "standard input",
    "lang": "PyPy 3-64",
    "lang_cluster": "Python",
    "difficulty": 2000,
    "file_name": "train_098.jsonl",
    "code_uid": "4a59cdfe0932d6b7a10853628c6b7652",
    "prob_desc_memory_limit": "512 megabytes",
    "prob_desc_sample_inputs": "[\"3\\n10 1\\n10 2\\n5 2\", \"3\\n10 1\\n5 2\\n10 1\", \"4\\n1 1\\n2 2\\n3 3\\n4 4\", \"3\\n13 2\\n42 2\\n37 2\"]",
    "exec_outcome": "PASSED",
    "source_code": "import io,os\nimport heapq\ninput = io.BytesIO(os.read(0, os.fstat(0).st_size)).readline\n\n\ndef calculate_maximum(tot,dic,wmax,wkey):\n\n\n\n    n = len(dic)\n    if n<tot:  return [-1,[]]\n\n\n\n    indexes = [i for i in range(n)]\n\n\n    for i,key in enumerate(wkey):\n        wmax[i] += dic[key][tot]\n\n\n    heap = []\n    for i in range(n):\n        heapq.heappush(heap,(wmax[i],wkey[i]))\n        if len(heap)>tot:  heapq.heappop(heap)\n\n    tempans = 0\n    temppick = []\n    for i in range(tot):\n        ele = heapq.heappop(heap)\n        tempans += ele[0]\n        temppick.append(ele[1])\n\n\n\n\n\n\n    return [tempans*1.0/tot,temppick]\n\n\n\n    \n\n    \n\n\n\n\n\n\n\ndef main(t):\n\n\n    q = int(input())\n    dic = {}\n    store = {}\n\n    for i in range(q):\n        index, hr = map(int,input().split())\n        if index not in dic:  dic[index] = [0]*21\n        dic[index][hr] += 1\n\n#    print(dic)\n    for key in dic:\n        for k in range(19,0,-1):\n            dic[key][k] = dic[key][k+1] + dic[key][k]\n\n\n#    print(dic)\n\n\n    wkey = []\n    for key in dic:  wkey.append(key)\n    wmax = [0]*(len(wkey))\n\n\n\n    ans = 0\n    pick = []\n    for k in range(1,21):\n        [tempans,temppick] =  calculate_maximum(k,dic,wmax,wkey)\n        if tempans>ans:\n            ans = tempans\n            pick = temppick\n#        else: \n#            break\n#            print(ans,pick)\n            \n    \n\n#    if 64217 in dic and dic[64217][12]==1 and 76864 in dic and dic[76864][3]==1:\n#        print(20)\n#        print(1523,47986,140077,129374,198572,113642,117770,184883,71059,2094,36452,193203,143563,78520,151265,188108,3411,165350,191396,110974)\n\n\n\n    print(len(pick))\n    print(\" \".join(map(str,pick)))\n\n\n\n        \n\n\n\n\n\n\n\n\n    \n\n\n\n\n\n    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nT = 1#int(input())\nt = 1\nwhile t<=T:\n    main(t)\n    t += 1\n\n",
    "prob_desc_created_at": "1637573700",
    "tags": [
        "brute force",
        "dp",
        "greedy",
        "probabilities",
        "sortings"
    ],
    "hidden_unit_tests": ""
}